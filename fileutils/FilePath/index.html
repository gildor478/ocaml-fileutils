<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>FilePath (fileutils.FilePath)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.4"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">fileutils</a> &#x00BB; FilePath</nav><header class="odoc-preamble"><h1>Module <code><span>FilePath</span></code></h1><p>Operations on abstract filenames.</p><p>This module allow to manipulate string or abstract representation of a filename.</p><p>Abstract representation of a filename allow to decode it only once, and should speed up further operation on it (comparison in particular). If you intend to do a lot of processing on filename, you should consider using its abstract representation.</p><p>This module manipulate abstract path that are not bound to a real filesystem. In particular, it makes the assumption that there is no symbolic link that should modify the meaning of a path. If you intend to use this module against a real set of filename, the best solution is to apply to every filename to solve symbolic link through <a href="../FileUtil/index.html#val-readlink"><code>FileUtil.readlink</code></a>.</p><ul class="at-tags"><li class="author"><span class="at-tag">author</span> Sylvain Le Gall</li></ul></header><nav class="odoc-toc"><ul><li><a href="#exceptions-and-types">Exceptions and types</a></li><li><a href="#ordering">Ordering</a></li><li><a href="#standard-operations">Standard operations</a></li><li><a href="#extension">Extension</a></li><li><a href="#path-like-operation">PATH-like operation</a></li><li><a href="#filename-specifications">Filename specifications</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-filename"><a href="#type-filename" class="anchor"></a><code><span><span class="keyword">type</span> filename</span><span> = string</span></code></div><div class="spec-doc"><p>Filename type.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-extension"><a href="#type-extension" class="anchor"></a><code><span><span class="keyword">type</span> extension</span><span> = string</span></code></div><div class="spec-doc"><p>Extension type.</p></div></div><h3 id="exceptions-and-types"><a href="#exceptions-and-types" class="anchor"></a>Exceptions and types</h3><div class="odoc-spec"><div class="spec exception anchored" id="exception-BaseFilenameRelative"><a href="#exception-BaseFilenameRelative" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">BaseFilenameRelative</span> <span class="keyword">of</span> <a href="#type-filename">filename</a></span></code></div><div class="spec-doc"><p>Cannot pass a base filename which is relative.</p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-UnrecognizedOS"><a href="#exception-UnrecognizedOS" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">UnrecognizedOS</span> <span class="keyword">of</span> string</span></code></div><div class="spec-doc"><p>We do not have recognized any OS, please contact upstream.</p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-EmptyFilename"><a href="#exception-EmptyFilename" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">EmptyFilename</span></span></code></div><div class="spec-doc"><p>The filename use was empty.</p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-NoExtension"><a href="#exception-NoExtension" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">NoExtension</span> <span class="keyword">of</span> <a href="#type-filename">filename</a></span></code></div><div class="spec-doc"><p>The last component of the filename does not support extension (Root, ParentDir...)</p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-InvalidFilename"><a href="#exception-InvalidFilename" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">InvalidFilename</span> <span class="keyword">of</span> <a href="#type-filename">filename</a></span></code></div><div class="spec-doc"><p>The filename used is invalid.</p></div></div><h3 id="ordering"><a href="#ordering" class="anchor"></a>Ordering</h3><div class="odoc-spec"><div class="spec value anchored" id="val-is_subdir"><a href="#val-is_subdir" class="anchor"></a><code><span><span class="keyword">val</span> is_subdir : <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_subdir child parent</code> Is <code>child</code> really a sub directory of <code>parent</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_updir"><a href="#val-is_updir" class="anchor"></a><code><span><span class="keyword">val</span> is_updir : <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_updir parent child</code> Is <code>parent</code> really a parent directory of <code>child</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compare"><a href="#val-compare" class="anchor"></a><code><span><span class="keyword">val</span> compare : <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>compare fl1 fl2</code> Give an order between the two filename. The classification is done by sub directory relation, <code>fl1</code> &lt; <code>fl2</code> iff <code>fl1</code> is a subdirectory of <code>fl2</code>, and lexicographical order of each part of the reduce filename when <code>fl1</code> and <code>fl2</code> has no hierarchical relation</p></div></div><h3 id="standard-operations"><a href="#standard-operations" class="anchor"></a>Standard operations</h3><div class="odoc-spec"><div class="spec value anchored" id="val-current_dir"><a href="#val-current_dir" class="anchor"></a><code><span><span class="keyword">val</span> current_dir : <a href="#type-filename">filename</a></span></code></div><div class="spec-doc"><p>Current dir.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parent_dir"><a href="#val-parent_dir" class="anchor"></a><code><span><span class="keyword">val</span> parent_dir : <a href="#type-filename">filename</a></span></code></div><div class="spec-doc"><p>Upper dir.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_filename"><a href="#val-make_filename" class="anchor"></a><code><span><span class="keyword">val</span> make_filename : <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-filename">filename</a></span></code></div><div class="spec-doc"><p>Make a filename from a set of strings.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-basename"><a href="#val-basename" class="anchor"></a><code><span><span class="keyword">val</span> basename : <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-filename">filename</a></span></code></div><div class="spec-doc"><p>Extract only the file name of a filename. Returns an empty string for directory-only paths like <code>&quot;dir/&quot;</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-dirname"><a href="#val-dirname" class="anchor"></a><code><span><span class="keyword">val</span> dirname : <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-filename">filename</a></span></code></div><div class="spec-doc"><p>Extract the directory name of a filename. Returns an empty string for file-only paths like <code>&quot;file&quot;</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-concat"><a href="#val-concat" class="anchor"></a><code><span><span class="keyword">val</span> concat : <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-filename">filename</a></span></code></div><div class="spec-doc"><p>Append a filename to a filename.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-reduce"><a href="#val-reduce" class="anchor"></a><code><span><span class="keyword">val</span> reduce : <span><span class="optlabel">?no_symlink</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-filename">filename</a></span></code></div><div class="spec-doc"><p>Return the shortest filename which is equal to the filename given. It remove the &quot;.&quot; in Unix filename, for example. If <code>no_symlink</code> flag is set, consider that the path doesn't contain symlink and in this case &quot;..&quot; for Unix filename are also reduced.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_absolute"><a href="#val-make_absolute" class="anchor"></a><code><span><span class="keyword">val</span> make_absolute : <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-filename">filename</a></span></code></div><div class="spec-doc"><p>Create an absolute filename from a filename relative and an absolute base filename.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_relative"><a href="#val-make_relative" class="anchor"></a><code><span><span class="keyword">val</span> make_relative : <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-filename">filename</a></span></code></div><div class="spec-doc"><p>Create a filename which is relative to the base filename.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-reparent"><a href="#val-reparent" class="anchor"></a><code><span><span class="keyword">val</span> reparent : <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-filename">filename</a></span></code></div><div class="spec-doc"><p><code>reparent fln_src fln_dst fln</code> Return the same filename as <code>fln</code> but the root is no more <code>fln_src</code> but <code>fln_dst</code>. It replaces the <code>fln_src</code> prefix by <code>fln_dst</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-identity"><a href="#val-identity" class="anchor"></a><code><span><span class="keyword">val</span> identity : <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-filename">filename</a></span></code></div><div class="spec-doc"><p>Identity for testing the stability of implode/explode.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_valid"><a href="#val-is_valid" class="anchor"></a><code><span><span class="keyword">val</span> is_valid : <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Test if the filename is a valid one.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_relative"><a href="#val-is_relative" class="anchor"></a><code><span><span class="keyword">val</span> is_relative : <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Check if the filename is relative to a dir or not.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_current"><a href="#val-is_current" class="anchor"></a><code><span><span class="keyword">val</span> is_current : <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Check if the filename is the current directory.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_parent"><a href="#val-is_parent" class="anchor"></a><code><span><span class="keyword">val</span> is_parent : <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Check if the filename is the parent directory.</p></div></div><h3 id="extension"><a href="#extension" class="anchor"></a>Extension</h3><p>Extension is define as the suffix of a filename, just after the last &quot;.&quot;.</p><div class="odoc-spec"><div class="spec value anchored" id="val-chop_extension"><a href="#val-chop_extension" class="anchor"></a><code><span><span class="keyword">val</span> chop_extension : <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-filename">filename</a></span></code></div><div class="spec-doc"><p>Remove extension and the trailing &quot;.&quot;.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_extension"><a href="#val-get_extension" class="anchor"></a><code><span><span class="keyword">val</span> get_extension : <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-extension">extension</a></span></code></div><div class="spec-doc"><p>Extracts the extension. Raises <code>Not_found</code> if there is no extension.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_extension"><a href="#val-check_extension" class="anchor"></a><code><span><span class="keyword">val</span> check_extension : <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-extension">extension</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Check the extension.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_extension"><a href="#val-add_extension" class="anchor"></a><code><span><span class="keyword">val</span> add_extension : <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-extension">extension</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-filename">filename</a></span></code></div><div class="spec-doc"><p>Add an extension with a &quot;.&quot; before. Using this function with an empty extension string creates a filename with a trailing dot.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-replace_extension"><a href="#val-replace_extension" class="anchor"></a><code><span><span class="keyword">val</span> replace_extension : <span><a href="#type-filename">filename</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-extension">extension</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-filename">filename</a></span></code></div><div class="spec-doc"><p>Replace extension.</p></div></div><h3 id="path-like-operation"><a href="#path-like-operation" class="anchor"></a>PATH-like operation</h3><p>PATH-like refers the environment variable PATH. This variable holds a list of filename. The functions <code>string_of_path</code> and <code>path_of_string</code> allow to convert this kind of list by using the good separator between filename.</p><div class="odoc-spec"><div class="spec value anchored" id="val-string_of_path"><a href="#val-string_of_path" class="anchor"></a><code><span><span class="keyword">val</span> string_of_path : <span><span><a href="#type-filename">filename</a> list</span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Create a PATH-like string.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-path_of_string"><a href="#val-path_of_string" class="anchor"></a><code><span><span class="keyword">val</span> path_of_string : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-filename">filename</a> list</span></span></code></div><div class="spec-doc"><p>Extract filenames from a PATH-like string.</p></div></div><h3 id="filename-specifications"><a href="#filename-specifications" class="anchor"></a>Filename specifications</h3><p>Definition of operations for path manipulation.</p><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-PATH_SPECIFICATION"><a href="#module-type-PATH_SPECIFICATION" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-PATH_SPECIFICATION/index.html">PATH_SPECIFICATION</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Generic operations.</p></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-PATH_STRING_SPECIFICATION"><a href="#module-type-PATH_STRING_SPECIFICATION" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-PATH_STRING_SPECIFICATION/index.html">PATH_STRING_SPECIFICATION</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Generic operations, with type filename and extension as strings.</p></div></div><p>Operations on filenames for other OS. The <a href="DefaultPath/index.html"><code>DefaultPath</code></a> always match the current OS.</p><div class="odoc-spec"><div class="spec module anchored" id="module-DefaultPath"><a href="#module-DefaultPath" class="anchor"></a><code><span><span class="keyword">module</span> <a href="DefaultPath/index.html">DefaultPath</a></span><span> : <a href="module-type-PATH_STRING_SPECIFICATION/index.html">PATH_STRING_SPECIFICATION</a></span></code></div><div class="spec-doc"><p>Default operating system.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-UnixPath"><a href="#module-UnixPath" class="anchor"></a><code><span><span class="keyword">module</span> <a href="UnixPath/index.html">UnixPath</a></span><span> : <a href="module-type-PATH_STRING_SPECIFICATION/index.html">PATH_STRING_SPECIFICATION</a></span></code></div><div class="spec-doc"><p>Unix operating system.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Win32Path"><a href="#module-Win32Path" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Win32Path/index.html">Win32Path</a></span><span> : <a href="module-type-PATH_STRING_SPECIFICATION/index.html">PATH_STRING_SPECIFICATION</a></span></code></div><div class="spec-doc"><p>Win32 operating system.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-CygwinPath"><a href="#module-CygwinPath" class="anchor"></a><code><span><span class="keyword">module</span> <a href="CygwinPath/index.html">CygwinPath</a></span><span> : <a href="module-type-PATH_STRING_SPECIFICATION/index.html">PATH_STRING_SPECIFICATION</a></span></code></div><div class="spec-doc"><p>Cygwin operating system.</p></div></div></div></body></html>
